(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={card__img:"ImageGalleryItem_card__img__3P2-f"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__Iohdc",Modal:"Modal_Modal__2-g02"}},14:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__1jSIZ"}},15:function(e,t,a){e.exports={button:"Button_button__2mYJH"}},22:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),o=a.n(r),c=a(9),i=a.n(c),s=(a(22),a(13)),l=a(3),u=a(4),m=a(6),h=a(5),d=a(7),g=a.n(d),p=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleInputChange=function(t){e.setState({searchQuery:t.currentTarget.value.toLowerCase()})},e.handleSubmitForm=function(t){t.preventDefault(),""!==e.state.searchQuery.trim()&&(e.props.onSubmit(e.state.searchQuery),e.setState({searchQuery:""}))},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:g.a.searchbar,children:Object(n.jsxs)("form",{onSubmit:this.handleSubmitForm,className:g.a.searchForm,children:[Object(n.jsx)("input",{className:g.a.SearchForm__input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchQuery,onChange:this.handleInputChange}),Object(n.jsx)("button",{type:"submit",className:g.a.SearchForm__button,children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})})]})})}}]),a}(r.Component),b=a(11),j=a.n(b);var _=function(e){var t=e.images,a=e.onImgClick;return t.map((function(e){var t=e.id,r=e.webformatURL,o=e.tags,c=e.largeImageURL;return Object(n.jsx)("li",{className:j.a.gallery__item,children:Object(n.jsx)("img",{src:r,alt:o,"data-modal_img":c,className:j.a.card__img,onClick:a})},t)}))},f=a(12),v=a.n(f),O=document.getElementById("modal-root"),y=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleCloseModal=function(t){"Escape"===t.code&&e.props.closeModal()},e.closeModalOnClick=function(t){t.target===t.currentTarget&&e.props.closeModal()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleCloseModal)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleCloseModal)}},{key:"render",value:function(){return Object(c.createPortal)(Object(n.jsx)("div",{className:v.a.Overlay,onClick:this.closeModalOnClick,children:Object(n.jsx)("div",{className:v.a.Modal,children:this.props.children})}),O)}}]),a}(r.Component),S=a(14),x=a.n(S),C=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modalOpen:!1,bigImgSrc:"",bigImgAlt:""},e.toogleModal=function(){e.setState((function(e){return{modalOpen:!e.modalOpen,bigImgSrc:"",bigImgAlt:""}}))},e.onImgClick=function(t){e.toogleModal(),e.setState({bigImgSrc:t.target.dataset.modal_img,bigImgAlt:t.target.alt})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.images,t=this.state,a=t.modalOpen,r=t.bigImgSrc,o=t.bigImgAlt;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:x.a.gallery,children:Object(n.jsx)(_,{images:e,onImgClick:this.onImgClick})}),a&&Object(n.jsx)(y,{closeModal:this.toogleModal,children:Object(n.jsx)("img",{src:r,alt:o})})]})}}]),a}(r.Component),I=a(15),k=a.n(I);var w=function(e){var t=e.onClick;return Object(n.jsx)("button",{type:"button",className:k.a.button,onClick:t,children:"Load more"})},M=a(16),F=a.n(M);var N=function(){return Object(n.jsx)(F.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})};var A=a(8),L=a.n(A),Q="pending",H="resolved",P="rejected",U=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={serchQuery:"",page:1,images:[],error:"",status:"",totalHits:null,perPage:12},e.handlerFormSubmit=function(t){e.setState((function(e){if(e.serchQuery!==t)return{serchQuery:t,page:1,images:[]}}))},e.incrementPage=function(){e.setState((function(e){return{page:e.page+1}}))},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=t.serchQuery,n=t.page,r=this.state,o=r.serchQuery,c=r.page;a===o&&n===c||(this.setState({status:Q}),this.getImages(o,c))}},{key:"getImages",value:function(e,t){var a=this;(function(e,t){var a="".concat("https://pixabay.com/api/?","q=").concat(e,"&page=").concat(t,"&key=").concat("19598883-8e8293d515495519269109cc8","&image_type=photo&orientation=horizontal&per_page=12");return fetch(a).then((function(e){return e.json()})).then((function(t){var a=t.hits,n=t.totalHits;return 0===a.length?Promise.reject(new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(e))):{hits:a,totalHits:n}}))})(e,t).then((function(e){var n=e.hits,r=e.totalHits,o=n.map((function(e){return{id:e.id,largeImageURL:e.largeImageURL,webformatURL:e.webformatURL,tags:e.tags}}));a.setState({images:[].concat(Object(s.a)(a.state.images),Object(s.a)(o)),totalHits:r,status:H}),1!==t&&window.scrollTo({top:document.documentElement.scrollHeight-1e3,behavior:"smooth"})})).catch((function(e){a.setState({images:[],error:e.message,status:P})}))}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.error,r=e.images,o=e.totalHits,c=e.page,i=e.perPage;return Object(n.jsxs)("div",{className:L.a.container,children:[Object(n.jsx)(p,{onSubmit:this.handlerFormSubmit}),("resolved"===t||"pending"===t)&&Object(n.jsx)("div",{className:L.a.gallery__container,children:Object(n.jsx)(C,{images:r})}),"resolved"===t&&o>c*i&&Object(n.jsx)(w,{onClick:this.incrementPage}),"rejected"===t&&Object(n.jsx)("div",{className:L.a.errorContainer,children:a}),"pending"===t&&Object(n.jsx)("div",{className:L.a.loaderContainer,children:Object(n.jsx)(N,{})})]})}}]),a}(r.Component);i.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3c9GI",SearchForm__button:"Searchbar_SearchForm__button__1I5zK",SearchForm__input:"Searchbar_SearchForm__input__1uvuS"}},8:function(e,t,a){e.exports={container:"App_container__16BeB",gallery__container:"App_gallery__container__1zLfN",loaderContainer:"App_loaderContainer__2_Xtj",errorContainer:"App_errorContainer__-T6B1"}}},[[43,1,2]]]);
//# sourceMappingURL=main.3bc724c8.chunk.js.map