{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","App.js","services/api-images.js","index.js","components/Searchbar/Searchbar.module.css","App.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleInputChange","event","setState","currentTarget","value","toLowerCase","handleSubmitForm","preventDefault","trim","props","onSubmit","className","s","searchbar","this","searchForm","SearchForm__input","type","autoComplete","autoFocus","placeholder","onChange","SearchForm__button","Component","ImageGalleryItem","imgSrc","imgTags","bigImg","onImgClick","gallery__item","src","alt","card__img","onClick","modalRef","document","getElementById","Modal","handleCloseModal","e","code","closeModal","closeModalOnClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","ImageGallery","modalOpen","bigSrc","bigAlt","toogleModal","bigImgSrc","bigImgAlt","images","gallery","map","id","webformatURL","tags","largeImageURL","Button","button","Loading","color","height","width","timeout","Status","App","serchQuery","page","error","status","totalHits","perPage","handlerFormSubmit","prevstate","incrementPage","prevProps","prevState","previousSearch","previousPage","currentSearch","currentPage","getImages","query","url","fetch","then","res","json","hits","length","Promise","reject","Error","findImages","newImages","image","scrollTo","top","documentElement","scrollTop","clientHeight","behavior","catch","message","container","gallery__container","errorContainer","loaderContainer","Loader","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c64eeb60.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card__img\":\"ImageGalleryItem_card__img__3P2-f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__Iohdc\",\"Modal\":\"Modal_Modal__2-g02\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__1jSIZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2mYJH\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleInputChange = event => {\n    this.setState({ searchQuery: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmitForm = event => {\n    event.preventDefault();\n\n    if (this.state.searchQuery.trim() === '') {\n      return;\n    }\n\n    this.props.onSubmit(this.state.searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form onSubmit={this.handleSubmitForm} className={s.searchForm}>\n          <input\n            className={s.SearchForm__input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.searchQuery}\n            onChange={this.handleInputChange}\n          />\n          <button type=\"submit\" className={s.SearchForm__button}>\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ imgSrc, imgTags, bigImg, onImgClick }) {\n  return (\n    <li className={s.gallery__item}>\n      <img\n        src={imgSrc}\n        alt={imgTags}\n        className={s.card__img}\n        onClick={() => {\n          onImgClick(bigImg, imgTags);\n        }}\n      />\n    </li>\n  );\n}\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  imgSrc: PropTypes.string.isRequired,\n  imgTags: PropTypes.string,\n  bigImg: PropTypes.string.isRequired,\n\n  onImgClick: PropTypes.func.isRequired,\n};\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport s from './Modal.module.css';\n\nconst modalRef = document.getElementById('modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleCloseModal);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleCloseModal);\n  }\n\n  handleCloseModal = e => {\n    if (e.code === 'Escape') {\n      this.props.closeModal();\n    }\n  };\n\n  closeModalOnClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.closeModal();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.closeModalOnClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRef,\n    );\n  }\n}\n\nexport default Modal;\n\nModal.propTypes = {\n  closeModal: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Modal from '../Modal';\nimport s from './ImageGallery.module.css';\n\nclass ImageGallery extends Component {\n  state = {\n    modalOpen: false,\n    bigSrc: '',\n    bigAlt: '',\n  };\n\n  toogleModal = () => {\n    this.setState(({ modalOpen }) => ({\n      modalOpen: !modalOpen,\n      bigImgSrc: '',\n      bigImgAlt: '',\n    }));\n  };\n\n  onImgClick = (bigSrc, bigAlt) => {\n    this.toogleModal();\n\n    this.setState({ bigSrc, bigAlt });\n  };\n\n  render() {\n    const { images } = this.props;\n    const { modalOpen, bigSrc, bigAlt } = this.state;\n\n    return (\n      <>\n        <ul className={s.gallery}>\n          {images.map(({ id, webformatURL, tags, largeImageURL }) => {\n            return (\n              <ImageGalleryItem\n                key={id}\n                imgSrc={webformatURL}\n                imgTags={tags}\n                bigImg={largeImageURL}\n                onImgClick={this.onImgClick}\n              />\n            );\n          })}\n        </ul>\n\n        {modalOpen && (\n          <Modal closeModal={this.toogleModal}>\n            {<img src={bigSrc} alt={bigAlt} />}\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nexport default ImageGallery;\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string,\n      largeImageURL: PropTypes.string.isRequired,\n    }),\n  ),\n};\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nfunction Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import Loader from 'react-loader-spinner';\n\nfunction Loading() {\n  return (\n    <Loader\n      type=\"Puff\"\n      color=\"#00BFFF\"\n      height={100}\n      width={100}\n      timeout={3000} //3 secs\n    />\n  );\n}\n\nexport default Loading;\n","import { Component } from 'react';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport findImages from './services/api-images';\n\nimport s from './App.module.css';\n\nconst Status = {\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass App extends Component {\n  state = {\n    serchQuery: '',\n    page: 1,\n    images: [],\n    error: '',\n    status: '',\n    totalHits: null,\n    perPage: 12,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { serchQuery: previousSearch, page: previousPage } = prevState;\n    const { serchQuery: currentSearch, page: currentPage } = this.state;\n\n    if (previousSearch !== currentSearch || previousPage !== currentPage) {\n      this.setState({ status: Status.PENDING });\n      this.getImages(currentSearch, currentPage);\n    }\n  }\n\n  getImages(query, page) {\n    findImages(query, page)\n      .then(({ hits, totalHits }) => {\n        const newImages = hits.map(image => {\n          return {\n            id: image.id,\n            largeImageURL: image.largeImageURL,\n            webformatURL: image.webformatURL,\n            tags: image.tags,\n          };\n        });\n\n        this.setState({\n          images: [...this.state.images, ...newImages],\n          totalHits,\n          status: Status.RESOLVED,\n        });\n        if (page !== 1) {\n          window.scrollTo({\n            top:\n              document.documentElement.scrollTop +\n              document.documentElement.clientHeight,\n            behavior: 'smooth',\n          });\n        }\n      })\n      .catch(error => {\n        this.setState({\n          images: [],\n          error: error.message,\n          status: Status.REJECTED,\n        });\n      });\n  }\n\n  handlerFormSubmit = serchQuery => {\n    this.setState(prevstate => {\n      if (prevstate.serchQuery === serchQuery) {\n        return;\n      }\n      return { serchQuery, page: 1, images: [] };\n    });\n  };\n\n  incrementPage = () => {\n    this.setState(({ page }) => ({ page: page + 1 }));\n  };\n\n  render() {\n    const { status, error, images, totalHits, page, perPage } = this.state;\n    return (\n      <div className={s.container}>\n        <Searchbar onSubmit={this.handlerFormSubmit} />\n\n        {(status === 'resolved' || status === 'pending') && (\n          <div className={s.gallery__container}>\n            <ImageGallery images={images} />\n          </div>\n        )}\n\n        {status === 'resolved' && totalHits > page * perPage && (\n          <Button onClick={this.incrementPage} />\n        )}\n\n        {status === 'rejected' && (\n          <div className={s.errorContainer}>{error}</div>\n        )}\n\n        {status === 'pending' && (\n          <div className={s.loaderContainer}>\n            <Loader />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const api = 'https://pixabay.com/api/?';\nconst apiKey = '19598883-8e8293d515495519269109cc8';\n\nexport default function findImages(query, page) {\n  const url = `${api}q=${query}&page=${page}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`;\n  return fetch(url)\n    .then(res => {\n      return res.json();\n    })\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        return Promise.reject(\n          new Error(`Не найдено изображений по запросу ${query}`),\n        );\n      }\n\n      return { hits, totalHits };\n    });\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3c9GI\",\"SearchForm__button\":\"Searchbar_SearchForm__button__1I5zK\",\"SearchForm__input\":\"Searchbar_SearchForm__input__1uvuS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__16BeB\",\"gallery__container\":\"App_gallery__container__1zLfN\",\"loaderContainer\":\"App_loaderContainer__2_Xtj\",\"errorContainer\":\"App_errorContainer__-T6B1\"};"],"sourceRoot":""}